# Файловая система в одном файле

## Постановка задачи

Реализуйте файловую систему на базе одного файла (все данные должны храниться внутри одного файла). 
Должна быть поддержка по крайней мере для операций создания, удаления файлов, а также чтения, записи контента. 
Должен быть документированный API для работы с файловой системой.
Для реализации желательно использовать платформу Java. 
Код должен быть production качества, в том числе с тестами.

## Пояснения к реализации

Написал файловую систему на основе одного файла.
Интерфейс для работы с файловой системой доступен в классе [FileSystem](src/main/java/org/test_project/jetbrains/file_system/FileSystem.java).

Для общения с файловой системой написал команды для работы в терминале.
Интерфейс команд доступен в файле [Command](src/main/java/org/test_project/jetbrains/commands/Command.java).

Поддерживаются команды:

- `create` создание файла и запись данных в новый файл
- `read`   чтение файла из файловой системы
- `delete` удаление файла из файловой системы
- `help`   описание работы с командами
- `exit`   выход из терминала

Для запуска программы нужно в аргументах передать путь для главного файла, 
где будет храниться вся информация.

### Подробнее о деталях реализации

#### Индексация файла
Данные в файловой системе хранятся только во время работы терминала.
При повторном запуске данные из указанного файла удаляются.

Не стал поддерживать следующей проблемы.
При запуске программы с не пустым файлом нужно сделать индексации существующего 
и сохранить имеющую информация. Нужно сделать уникальный разделитель между файлами,
который нельзя было бы подделать контентом другого файла.

Для решения этой проблемы хотел хранить `header`, который состоял бы из уникального ключа, названия файла, его позиции в файловой системе и размера.
Уникальный ключ создавался из трех других записей в `header` и при индексации проверялась корректность этого ключа.

В точки зрения реализации хотел сделать сервис `FileHeaderService` с методами создания и проверки ключа.
От этого сервиса зависели: [FileIndex](src/main/java/org/test_project/jetbrains/file_system/FileIndex.java)
для индексации и [FileHeaderFactory](src/main/java/org/test_project/jetbrains/file_system/FileHeaderFactory.java) для `header` создания с ключом.

#### Работа операций чтения и записи

- Запись (создание) нового файла реализуется добавлением контента вниз файла. 
  Сложность этой операции `O(n)`, где `n` - размер файла;

- Чтение файла реализуется перемещением `position` в `SeekableByteChannel`
  к началу контента файла в файловой системе и считыванием данных размером указанного файла. 
  Сложность также `O(n)`, где `n` - размер файла;

- Удаление файла происходит про аналогии с `ArrayList`. Все файлы ниже удаляемого перемещаются вверх
на его место. Сложность `O(m)`, где `m` - все файлы в системе, кроме удаляемого.

#### Поддерживаемые форматы

Текстовые форматы нужно записывать в файл с суффиктом `.txt`. 
Контент этого файла можно выводить в консоль, для других бинарных файлов программа попросит указать файл вывода.
Для изображений я поддержал `jpg` и `png` форматы, также проверил работу с `pdf` и `excel`.
